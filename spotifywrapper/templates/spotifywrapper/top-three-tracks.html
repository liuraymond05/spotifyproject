{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>{% trans "Top Three Tracks" %}</title>
   <link rel="stylesheet" href="{% static 'spotifywrapped/breakdown.css' %}">
        <script src="{% static 'spotifywrapped/theme.js' %}" defer></script>


   <style>
        /* Base Styles */
        body {
           margin: 0;
           font-family: 'Helvetica', sans-serif;
           color: white;
           background: linear-gradient(135deg, #1DB954, #121212);
           background-size: 400% 400%;
           animation: gradientBackground 8s ease infinite;
           overflow: hidden;
           display: flex;
           flex-direction: column;
           align-items: center;
           height: 100vh;
           transition: background 0.5s ease, color 0.5s ease;
       }


       @keyframes gradientBackground {
           0% { background-position: 0% 50%; }
           50% { background-position: 100% 50%; }
           100% { background-position: 0% 50%; }
       }


       /* Dark Mode */
       body.dark-mode {
           background: linear-gradient(135deg, #121212, #0d47a1); /* Dark blue gradient */
       }


       @keyframes gradientBackgroundDark {
           0% { background-position: 0% 50%; }
           50% { background-position: 100% 50%; }
           100% { background-position: 0% 50%; }
       }


       /* Light Mode */
       body.neon-mode {
           background: linear-gradient(135deg, #f9e7cf, #f56b2a); /* Warm orange gradient */
       }


        /* Updated Header Styling to Match Genre Page */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: black;
            padding: 25px 20px;
            box-sizing: border-box;
            color: white;
            z-index: 1000;
        }

        header .logo {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        header .logo img {
            width: 40px;
            height: auto;
        }

        header .logo h1 {
            margin: 0;
            font-size: 1.6em;
        }

        /* Dropdown Menu */
        .dropdown-menu {
            display: none;
            position: absolute;
            right: 20px;
            top: 90px;
            background-color: black;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            width: 200px;
            text-align: center;
        }

        .dropdown-menu ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .dropdown-menu li {
            padding: 10px 0;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .dropdown-menu li:hover {
            background-color: hotpink;
        }

        .dropdown-menu a {
            color: white;
            text-decoration: none;
            font-size: 1em;
            display: block;
            text-align: center;
        }

        /* Podium Section */
        .podium-container {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            height: 70%;
            margin-top: 100px;
            position: relative;
        }

        .podium {
            display: flex;
            align-items: flex-end;
            justify-content: center;
        }

        /* Adjusted podium step size */
.podium-step {
    background: linear-gradient(135deg, #ffcc00, #ff007b);
    border-radius: 15px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    color: white;
    margin: 0 20px;
    box-shadow: 0 8px 20px rgba(255, 0, 123, 0.5);
    position: relative;
    height: 400px; /* Increased height for audio player */
    width: 200px; /* Adjusted width */
    padding-bottom: 15px; /* Space for audio player */
}

/* Adjust sizes of specific podium steps */
.podium-step:nth-child(1) {
    height: 450px;
    width: 240px;
}

.podium-step:nth-child(2) {
    height: 500px; /* Highest pedestal */
    width: 240px;
}

.podium-step:nth-child(3) {
    height: 400px;
    width: 240px;
}

/* Style the audio player to fit the podium */
.track-audio audio {
    width: 170px;
    max-width: 200px; /* Maximum width */
    height: 40px; /* Consistent height */
    margin-top: 15px; /* Add spacing above the player */
}

        .podium-step img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            position: absolute;
            top: -90px; /* Floating above the pedestal */
        }

        .podium-step .track-info {
            text-align: center;
            padding: 15px;
            font-size: 1.2rem;
        }

        .play-button {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 1rem;
            color: #fff;
            background: #ff007b;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .play-button:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
        }

        /* Buttons Styling */
       .buttons-container {
           position: fixed;
           bottom: 20px;
           left: 0;
           right: 0;
           display: flex;
           justify-content: center;
           gap: 20px;
           z-index: 1000;
       }



       .btn {
           display: inline-block;
           padding: 15px 25px;

           font-size: 1em;
           font-weight: bold;
           text-decoration: none;
           border-radius: 25px;
           box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
           transition: background-color 0.3s ease, transform 0.3s ease;
       }

       .btn:hover {
           transform: translateY(-5px);
           box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
       }


   </style>
</head>

<body>
  <header>
        <div class="logo">
            <a href="{% url 'home' %}">
            <img src="{% static 'spotifywrapped/spotify.png' %}" alt="Spotify Logo">
        </a>
            <h1>{% trans "My Top Tracks" %}</h1>
        </div>
        <div class="menu-icon" onclick="toggleMenu()">
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
        </div>
    </header>

    <div class="dropdown-menu" id="dropdownMenu">
        <ul>
            <li><a href="{% url 'gamepage' %}" id="games">{% trans "Games" %}</a></li>
            <li><a href="{% url 'wraps' %}" id="wraps">{% trans "My Wraps" %}</a></li>
            <li><a href="{% url 'settings' %}" id="settingsLink">{% trans "Settings" %}</a></li>
            <li><a href="{% url 'logout' %}">{% trans "Log Out" %}</a></li>
        </ul>
    </div>

    <!-- Podium Section -->
    <div class="podium-container">
    <div class="podium">
        {% if tracks %}
            {% for track in tracks %}
                <div class="podium-step">
                    <img src="{{ track.album.images.0.url }}" alt="{{ track.name }}">
                    <div class="track-info">
                        <p class="track-name">{{ track.name }}</p>
                        <p>by {{ track.artists.0.name }}</p>

                        <!-- Audio Player -->
                        <div class="track-audio">
                            <audio controls>
                                <source
                                    {% if track.preview_url %}
                                    src="{{ track.preview_url }}"
                                    {% else %}
                                    {% if forloop.counter == 1 %}
                                    src="{% static 'spotifywrapped/indie.mp3' %}"
                                    {% elif forloop.counter == 2 %}
                                    src="{% static 'spotifywrapped/jazz.mp3' %}"
                                    {% elif forloop.counter == 3 %}
                                    src="{% static 'spotifywrapped/orchestra.mp3' %}"
                                    {% endif %}
                                    {% endif %}
                                    type="audio/mpeg">
                                Your browser does not support the audio element.
                            </audio>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% endif %}
    </div>
</div>




    <!-- Buttons Section -->
    <div class="buttons-container">
        <a href="{% url 'favorite_mood' %}" class="btn">{% trans "Back" %}</a>
        <a href="{% url 'home' %}" class="btn">{% trans "Home" %}</a>
        <a href="{% url 'end_wrapped' %}" class="btn">{% trans "Next" %}</a>
    </div>

    <!-- Audio Player -->
    <audio id="audioPlayer"></audio>

    <script>
         function toggleMenu() {
            const dropdown = document.getElementById("dropdownMenu");
            dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
        }

        function playAudio(url) {
            const audioPlayer = document.getElementById("audioPlayer");
            audioPlayer.src = url;
            audioPlayer.play();
        }
    </script>
</body>
</html>
